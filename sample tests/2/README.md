## setup

`k config view`

______________

5:39
# Q1

  List all the pods running in ALL namespaces based on CPU utilization. Save the output to
/tmp/pod-high-cpu.txt
Deploy the metrics server first if you already don't have one.


# Q2
Deploy a pod called log-demo with following YAML manifest Now, edit the pod and add
a new container called monitor which will display the logs generated by the container
called counter . Use command /bin/sh, -c, 'tail -n+1 -f
/var/log/app/demoapp.log to display logs.


# Q3
List all deployments running in ALL namespaces. ONLY display deployment name ,
namespace name and image name of the FIRST container. Save the output to
/tmp/all-deployments.txt
Output should look similar to the sample shown below:
NAME NAMESPACE IMAGE_NAME
app1 default nginx


# Q4

Let's assume you have etcd backup stored at location /tmp/etcd-snapshot.db . What
are the correct steps to restore the etcd backup with following configuration:
Default certificate and key files
Use localhost endpoints


# Q5
Deploy a pod called web with port 80 and port name webport . Create a service by
name web-svc listening on port 8080 and mapped with port name webport .
Use nginx image for the pod.


# Q6

Create a role called dev-user-role in the dev namespace which can list all the
pods and deployments Create necessary role binding for service account dev-sa


# Q7

Deploy an Ingress resource called multi-host-ingress with following configuration:
backend path: /video
backend service: web-service
backend port: 8080
hostname: web.example.com

backend path: /
backend service: video-service
backend port: 9000
hostname: video.example.com

Use any image for the containers and appropriate domain names.
* Create all necessary dependent resources.


# Q8

Label the node node k8s-node-01 with key equals to disk and value equals to ssd .
Deploy new pods using this label.

# Q9

Create a NetworkPolicy which allows ALL outgoing traffic to dev namespace.

# Q10

Create a NetworkPolicy in the prod namespace which will allow traffic from ALL
pods labelled as tier=frontend running in ALL namespaces.

# Q11

Deploy a service called my-web-svc in the alpha namespace listening on port 8080 .
Use nginx image to deploy backend pods.
Try to resolve the service and save the output to /tmp/svc-lookup.txt

Also, resolve the pod associated with the service and save the output to /tmp/pod-
lookup.txt


# Q12

Create secure environment variables and configure the pod as per below
specifications:
pod name: secure-pod
Image: busybox
Environment Variables:
Key Value
username admin
password cka@2020!

# Q13

Create a service called test-svc-1 listening on local port 80 and node's port 30080 .
Use pods with label app=test for this service. The service must have 2 pods available at
the minimum with nginx image.

# Q14

List all container images of all pods running in all namespaces and save the output to
/tmp/container-images.txt

# Q15


Create a pod called secure-admin with user id set to 1000 . Make this setting
DEFAULT for ALL containers and use busybox image with sleep command set to 1200
seconds


# Q16

Which cluster component is responsible for scheduling pods on the cluster?


# Q17

Create a PersistentVolume called pv-test with 8GB capacity. Set the access mode
to ReadWriteMany . Any output from the container should be stored on the disk of
underlying host at location /mnt/data .

# Q18

Taint the node k8s-node-01 with key equals to env , value equals to dev and effect
set to NoSchedule .
Now do necessary configuration so that ONLY pods with label tier=backend should get
deployed to node k8s-node-01

# Q19

Create a pod with required configuration that allows you to change date on the container.
Use busybox image.
Use following command to test:
date --set="2020-01-01 10:00:00"


# Q20

Worker node k8s-node-01 is in Not Ready state. Perform necessary steps to make
k8s-node-01 available again.




